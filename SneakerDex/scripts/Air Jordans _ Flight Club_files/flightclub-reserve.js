document.observe("dom:loaded",function(){if("undefined"!=typeof QuickCheckout){var agreement=jQuery("#agreement-1"),checkoutAgreements=jQuery("ol.checkout-agreements"),pleaseWait=jQuery("#review-please-wait");agreement&&(agreement.on("change",function(){agreement.is(":checked")?checkoutAgreements.find(".validation-advice").remove():jQuery("p.agree").after('<div class="validation-advice">Please agree to our Terms and Conditions</div>')}),QuickCheckout.prototype.validateTermsAndCondition=function(event){return agreement.is(":checked")?(checkoutAgreements.find(".validation-advice").remove(),!0):(checkoutAgreements.find(".validation-advice").remove(),jQuery("p.agree").after('<div class="validation-advice">Please agree to our Terms and Conditions</div>'),!1)}),QuickCheckout.prototype.reserveShoes=function(event){var validationError=!1;QuickCheckout.prototype.validateTermsAndCondition()||(validationError=!0),paymentValidator.validate()||(moveValidation(),validationError=!0);var shippingIsValid=!0;if($("co-shipping-form")&&$("billing:use_for_shipping_no")&&$("billing:use_for_shipping_no").checked){var shippingValidator=new Validation(shipping.form);shippingValidator.validate()||(shippingIsValid=!1,validationError=!0)}var billingValidator=new Validation(billing.form);if(billingValidator.validate()&&shippingIsValid||(validationError=!0),$("co-shipping-method-form")){var shippingMethodValidator=new Validation("co-shipping-method-form");shippingMethodValidator.validate()||(validationError=!0)}validationError||(pleaseWait.show(),jQuery.getJSON(mageBaseUrlJs+"fchelper/ajax/reserve",function(response){response.success?QuickCheckout.prototype.saveOrder():response.code&&(pleaseWait.hide(),trackIfReserveFailed(),backgroundFade(),jQuery("html, body").animate({scrollTop:0},"slow"),"removed"==response.item.status?shoeBought(response):"switchable"==response.item.status?priceOrLocationUpdated(response):$("error-message-reserve").style.display="block")}))},QuickCheckout.prototype.addEventListenerToSaveOrderButton=function(){$("place-order-button").observe("click",this.reserveShoes.bindAsEventListener(this))}}backgroundFade=function(){var fadeBackground=jQuery("#checkout-fade-background");fadeBackground.height(jQuery(document).height()),fadeBackground.fadeIn("fast")},shoeBought=function(response){$("shoe-bought").style.display="block",jQuery("html, body").animate({scrollTop:0},"slow"),ItemData.itemsLeft=response.item.itemsLeft;var name=response.item.name,url=response.item.url,thumbnail=response.item.thumbnail,size=response.item.size;$("bought-name").innerHTML=name,$("bought-size").innerHTML="Size: "+size,$("popup-thumbnail").setAttribute("src",thumbnail),$("find-size").setAttribute("href",url)},priceOrLocationUpdated=function(response){$("price-updated").style.display="block",jQuery("html, body").animate({scrollTop:0},"slow"),ItemData.id=response.item.id;var name=response.item.name,thumbnail=response.item.thumbnail,size=response.item.size,newPrice=response.item.newPrice,oldPrice=response.item.oldPrice,newLocation=response.item.newLocation,oldLocation=response.item.oldLocation;$("size-updated-name").innerHTML=name,$("item-size").innerHTML="Size: "+size,$("popup-thumbnail-price").setAttribute("src",thumbnail),newPrice!==oldPrice?($("popup-item-price").innerHTML=newPrice,$("popup-item-price-old").innerHTML=oldPrice):jQuery(".price-updated-wrap").hide(),newLocation!==oldLocation?($("popup-item-location").innerHTML=newLocation,$("popup-item-location-old").innerHTML=oldLocation):jQuery(".location-updated-wrap").hide()},trackIfReserveFailed=function(){dataLayer.push({eventCategory:"checkout",status:"Not in stock",event:"Stock"})}});var ItemData={};