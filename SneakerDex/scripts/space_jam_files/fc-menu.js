var device={Android:function(){return navigator.userAgent.match(/Android/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return device.Android()||device.iOS()||device.Windows()}},removePageOverlay;jQuery(document).ready(function($){function setMobileNavHeight(){isMobile.matches?(navScroll.height(screenHeight-60),$("#nav .level0 > ul").hide()):(navScroll.height("auto"),$("#nav .level0 > ul").css("display",""))}function setMobileSearchBarHeight(){isMobile.matches&&mobileSearchBar.height(screenHeight-60)}function addPageOverlay(e){isMobile.matches||(e.preventDefault(),pageOverlay.addClass("is-visible"))}function toggleMenuOverlayOnDesktop(e){null==device.any()&&$(this).children(".menu-vlist").length>0&&(pageOverlay.toggleClass("menu-overlay"),pageOverlay.toggleClass("is-visible"))}function toggleMenuOverlayOnDevice(e){!isMobile.matches&&device.any().length>0&&($(this).next(".menu-vlist").length>0?(e.preventDefault(),pageOverlay.addClass("menu-overlay"),pageOverlay.addClass("is-visible")):(pageOverlay.removeClass("menu-overlay"),pageOverlay.removeClass("is-visible")))}function toggleMenuOverlayOnMobile(e){isMobile.matches&&(e.preventDefault(),pageOverlay.toggleClass("menu-overlay"),pageOverlay.toggleClass("is-visible"))}function toggleSearchBarOnMobile(e){body.toggleClass("no-scroll-search"),searchToggle.toggleClass("active"),mobileSearchBar.toggleClass("is-visible"),mobileSearchInput.focus(),setMobileSearchBarHeight(),nav.hasClass("is-visible")&&(nav.removeClass("is-visible"),body.removeClass("no-scroll"))}function addMenuOnMobile(e){nav.toggleClass("is-visible"),body.toggleClass("no-scroll"),setMobileNavHeight(),mobileSearchBar.hasClass("is-visible")&&mobileSearchBar.removeClass("is-visible"),searchToggle.hasClass("active")&&searchToggle.removeClass("active")}function removeMenuOnMobile(e){nav.removeClass("is-visible"),body.removeClass("no-scroll"),$("#nav").removeClass("mobile-open"),$(".menu-bp-wrapper.mobile-show, .close-current-open.mobile-show").removeClass("mobile-show"),setMobileNavHeight()}function toggleSubMenuOnMobile(e){if(isMobile.matches){var $thisMenuLink=$(this),menuId=$thisMenuLink.data("togglemenu"),subMenu=$(".level0 > #cat_id"+menuId),subMenuClose=subMenu.next(".close-current-open");subMenu.length>0&&(e.preventDefault(),$thisMenuLink.closest("li").toggleClass("child-visible"),subMenu.hasClass("mobile-show")?(setTimeout(function(){subMenu.hide()},300),$("#nav").removeClass("mobile-open"),subMenu.removeClass("mobile-show"),subMenuClose.removeClass("mobile-show")):subMenu.show(100,function(){$("#nav").addClass("mobile-open"),subMenu.addClass("mobile-show"),subMenuClose.addClass("mobile-show")}))}}function toggleSearchButtonOnMobile(e){var text=$(this).val();text.length>0?mobileSearchButton.addClass("active"):mobileSearchButton.removeClass("active")}function activateCurrencyLink(e){var link=$(this).children(".toplinks-ref"),arrow=$(this).children(".chevron-down");arrow.length>0&&(link.addClass("red"),arrow.removeClass("chevron-down").addClass("red chevron-up"))}function deactivateCurrencyLink(e){var link=$(this).children(".toplinks-ref"),arrow=$(this).children(".chevron-up");arrow.length>0&&(link.removeClass("red"),arrow.removeClass("red chevron-up").addClass("chevron-down"))}function activateCartLink(e){var arrow=cartLink.find(".chevron-down");arrow.length>0&&arrow.removeClass("chevron-down").addClass("chevron-up")}function deactivateCartLink(e){var arrow=cartLink.find(".chevron-up");arrow.length>0&&arrow.removeClass("chevron-up").addClass("chevron-down")}function togglePageOverlay(){cartLink.click(addPageOverlay),cartClose.length&&!cartClose.hasClass("events-added")&&cartClose.click(removePageOverlay).addClass("events-added")}function toggleMenuOverlay(){$("#menu-toggle, #close-menu, #search-toggle-nav").click(toggleMenuOverlayOnMobile),$("#nav > .level0 > a.menu-link").click(toggleMenuOverlayOnDevice),$("#nav > .level0").hover(toggleMenuOverlayOnDesktop)}function toggleCartLink(itemQty){setTimeout(function(){itemQty>0?cartLink.find(".sprite, .header-cart-price .price, .header-cart-count").addClass("red"):cartLink.find(".sprite, .header-cart-price .price, .header-cart-count").removeClass("red")},10)}var nav=$(".nav-container"),navScroll=$(".nav-scroll"),body=$("body"),pageOverlay=$("#entire-page-wrap .page-overlay"),currencySelect=$(".currency-select"),cartLink=$(".atca-cart"),cartClose=$(".block-cart .close"),miniCart=$(".toplinks-submenu-cart"),searchToggle=$("#search-toggle"),mobileSearchBar=$(".mobile-search-bar"),mobileSearchInput=$(".mobile-search-bar #search"),mobileSearchButton=$(".mobile-search-bar button"),showAllFromParent=($(".mobile-search-bar .searchautocomplete .searchautocomplete-placeholder ul"),$(".show-all-from-parent")),isMobile=window.matchMedia("only screen and (max-width: 979px)"),screen=$(window),screenHeight=screen.height();removePageOverlay=function(e){isMobile.matches||(e.preventDefault(),pageOverlay.removeClass("is-visible"))},$("#search-toggle, #search-toggle-nav, #nav-close").click(toggleSearchBarOnMobile),$("#menu-toggle").click(addMenuOnMobile),$("#close-menu").click(removeMenuOnMobile),$(".menu-link, .close-child").click(toggleSubMenuOnMobile),currencySelect.hover(activateCurrencyLink,deactivateCurrencyLink),cartLink.click(activateCartLink),miniCart.find(".block-content .close").click(deactivateCartLink),mobileSearchInput.keyup(toggleSearchButtonOnMobile),document.observe("addtocartajax:update",function(e){toggleCartLink(e.memo.itemQty)}),screen.smartresize(function(){screenHeight=screen.height(),setMobileNavHeight(),setMobileSearchBarHeight(),toggleMenuOverlay()}),screen.on("orientationchange",function(e){screenHeight=screen.height(),setMobileNavHeight(),setMobileSearchBarHeight(),toggleMenuOverlay()}),screen.on("click",function(e){var outsideTopMenuItem=0==$(e.target).closest("#nav > .level0").length,outsideCartLink=0==$(e.target).closest(cartLink).length,outsideMiniCart=0==$(e.target).closest(miniCart.parents(".toplinks-submenu")).length,outsideMenuToggle=0==$(e.target).closest(".menu-toggle").length;outsideMiniCart&&outsideCartLink&&outsideTopMenuItem&&outsideMenuToggle&&pageOverlay.removeClass("is-visible"),outsideTopMenuItem&&outsideMenuToggle&&(pageOverlay.removeClass("menu-overlay"),removeMenuOnMobile(e)),outsideMiniCart&&outsideCartLink&&(miniCart.parents(".toplinks-submenu").hide(),deactivateCartLink(e))}),showAllFromParent.each(function(){$(this).appendTo($(this).prev(".menu-nested-parent").children(".menu-bp-items"))}),togglePageOverlay(),toggleMenuOverlay();var cartPrice=cartLink.find(".header-cart-price .price").text().replace("$",""),cartCount=cartLink.find(".header-cart-count").text();toggleCartLink(parseInt(cartPrice||cartCount))});